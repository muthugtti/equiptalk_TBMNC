module.exports=[71966,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944);function f(){let a,f,[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)("hierarchy"),[m,n]=(0,c.useState)("all"),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(new Set),s=(0,e.useRouter)();(0,c.useEffect)(()=>{t()},[]);let t=async()=>{j(!0);try{let a=await fetch("/api/equipment"),b=await a.json();b.equipment&&h(b.equipment)}catch(a){console.error("Failed to fetch equipment",a)}finally{j(!1)}},u=async(a,b)=>{b.stopPropagation(),s.push(`/dashboard/equipment/new?parentId=${a}`)},v=a=>{switch(a){case"OPERATIONAL":return"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300";case"MAINTENANCE":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300";case"DOWN":return"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},w=(a=>{let b=a;if("all"!==m){let a={active:"OPERATIONAL",maintenance:"MAINTENANCE",down:"DOWN"};b=b.filter(b=>b.status===a[m])}if(o){let a=o.toLowerCase();b=b.filter(b=>b.name.toLowerCase().includes(a)||b.model.toLowerCase().includes(a))}return b})(g),x=(a=new Map,f=[],w.forEach(b=>{a.set(b.id,{...b,children:[]})}),w.forEach(b=>{let c=a.get(b.id);b.parentId&&a.has(b.parentId)?a.get(b.parentId).children.push(c):f.push(c)}),f),y=({node:a,level:c=0})=>{let d=a.children.length>0,e=q.has(a.id);return(0,b.jsxs)("div",{className:"relative flex flex-col",children:[(0,b.jsxs)("div",{className:`
                        group flex items-center justify-between p-4 my-1 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 
                        hover:border-primary/50 transition-all cursor-pointer shadow-sm
                    `,style:{marginLeft:`${24*c}px`},onClick:()=>s.push(`/dashboard/equipment/${a.id}`),children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[d?(0,b.jsx)("button",{onClick:b=>{var c;let d;return c=a.id,b.stopPropagation(),void((d=new Set(q)).has(c)?d.delete(c):d.add(c),r(d))},className:"flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-400",children:(0,b.jsx)("span",{className:"material-symbols-outlined",children:e?"remove":"add"})}):(0,b.jsx)("div",{className:"w-8 h-8"}),(0,b.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-500",children:(0,b.jsx)("span",{className:"material-symbols-outlined",children:a.type.toLowerCase().includes("factory")?"factory":a.type.toLowerCase().includes("cell")?"grid_view":"precision_manufacturing"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-base font-bold text-gray-900 dark:text-white",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.type," • ",a.model||"No Model"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:`px-2.5 py-1 rounded-md text-xs font-bold ${v(a.status)}`,children:a.status}),(0,b.jsxs)("button",{onClick:b=>u(a.id,b),className:"hidden group-hover:flex items-center gap-1 px-3 py-1.5 rounded-lg text-primary bg-primary/10 hover:bg-primary/20 text-xs font-bold transition-colors",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Add Child"]})]})]}),e&&a.children.map(a=>(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)(y,{node:a,level:c+1})},a.id))]})};return(0,b.jsx)("main",{className:"flex-1 px-4 sm:px-6 md:px-10 py-8 bg-background-light dark:bg-background-dark min-h-screen",children:(0,b.jsxs)("div",{className:"mx-auto max-w-7xl space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,b.jsx)("h1",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-[-0.033em]",children:"My Equipment"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center p-1 rounded-lg bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("button",{onClick:()=>l("grid"),className:`px-3 py-1.5 rounded-md flex items-center gap-2 text-sm font-bold transition-colors ${"grid"===k?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700"}`,children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-lg",children:"grid_view"}),"Grid"]}),(0,b.jsxs)("button",{onClick:()=>l("hierarchy"),className:`px-3 py-1.5 rounded-md flex items-center gap-2 text-sm font-bold transition-colors ${"hierarchy"===k?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700"}`,children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-lg",children:"account_tree"}),"Hierarchy"]})]}),(0,b.jsxs)(d.default,{href:"/dashboard/equipment/new",className:"flex h-10 items-center justify-center gap-x-2 rounded-lg bg-primary px-4 text-sm font-bold text-white hover:bg-primary/90 transition-colors shadow-sm",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-lg",children:"add"}),(0,b.jsx)("span",{children:"Add New Equipment"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 bg-white dark:bg-gray-800 p-2 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-gray-400",children:"search"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name or ID...",value:o,onChange:a=>p(a.target.value),className:"w-full pl-10 pr-4 py-2 bg-transparent text-sm text-gray-900 dark:text-white placeholder:text-gray-400 focus:outline-none"})]}),(0,b.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 sm:pb-0",children:["all","active","repair","decommissioned"].map(a=>(0,b.jsx)("button",{onClick:()=>n(a),className:`
                                    px-4 py-1.5 rounded-lg text-sm font-bold whitespace-nowrap transition-colors
                                    ${m===a||"active"===a&&"active"===m?"bg-primary/10 text-primary":"text-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700"}
                                `,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]}),"hierarchy"===k&&(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm font-medium text-primary",children:[(0,b.jsxs)("button",{onClick:()=>r(new Set),className:"flex items-center gap-1 hover:underline",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-base",children:"unfold_less"}),"Collapse All"]}),(0,b.jsxs)("button",{onClick:()=>{r(new Set(g.map(a=>a.id)))},className:"flex items-center gap-1 hover:underline",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-base",children:"unfold_more"}),"Expand All"]})]}),i?(0,b.jsx)("div",{className:"flex justify-center py-20",children:(0,b.jsx)("span",{className:"material-symbols-outlined animate-spin text-primary text-4xl",children:"progress_activity"})}):0===g.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-5xl mb-4",children:"inventory_2"}),(0,b.jsx)("p",{children:"No equipment found."})]}):(0,b.jsx)("div",{className:"space-y-4",children:"hierarchy"===k?(0,b.jsx)("div",{className:"space-y-2",children:x.length>0?x.map(a=>(0,b.jsx)(y,{node:a},a.id)):(0,b.jsx)("p",{className:"text-gray-500",children:"No matching items configured in hierarchy."})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(a=>(0,b.jsxs)("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>s.push(`/dashboard/equipment/${a.id}`),children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-gray-500",children:"precision_manufacturing"})}),(0,b.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${v(a.status)}`,children:a.status})]}),(0,b.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white mb-1",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.type," • ",a.serialNumber]})]},a.id))})})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=src_app_dashboard_equipment_page_tsx_f6823a7b._.js.map