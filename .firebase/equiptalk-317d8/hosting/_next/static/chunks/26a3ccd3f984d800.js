(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17147,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(22016),s=e.i(18566);function l(){let e,l,[i,d]=(0,t.useState)([]),[n,c]=(0,t.useState)(!0),[o,x]=(0,t.useState)("hierarchy"),[m,h]=(0,t.useState)("all"),[g,p]=(0,t.useState)(""),[u,y]=(0,t.useState)(new Set),b=(0,s.useRouter)();(0,t.useEffect)(()=>{f()},[]);let f=async()=>{c(!0);try{let e=await fetch("/api/equipment"),a=await e.json();a.equipment&&d(a.equipment)}catch(e){console.error("Failed to fetch equipment",e)}finally{c(!1)}},j=async(e,a)=>{a.stopPropagation(),b.push(`/dashboard/equipment/new?parentId=${e}`)},N=e=>{switch(e){case"OPERATIONAL":return"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300";case"MAINTENANCE":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300";case"DOWN":return"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},v=(e=>{let a=e;if("all"!==m){let e={active:"OPERATIONAL",maintenance:"MAINTENANCE",down:"DOWN"};a=a.filter(a=>a.status===e[m])}if(g){let e=g.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(e)||a.model.toLowerCase().includes(e))}return a})(i),w=(e=new Map,l=[],v.forEach(a=>{e.set(a.id,{...a,children:[]})}),v.forEach(a=>{let t=e.get(a.id);a.parentId&&e.has(a.parentId)?e.get(a.parentId).children.push(t):l.push(t)}),l),k=({node:e,level:t=0})=>{let r=e.children.length>0,s=u.has(e.id);return(0,a.jsxs)("div",{className:"relative flex flex-col",children:[(0,a.jsxs)("div",{className:`
                        group flex items-center justify-between p-4 my-1 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 
                        hover:border-primary/50 transition-all cursor-pointer shadow-sm
                    `,style:{marginLeft:`${24*t}px`},onClick:()=>b.push(`/dashboard/equipment/${e.id}`),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[r?(0,a.jsx)("button",{onClick:a=>{var t;let r;return t=e.id,a.stopPropagation(),void((r=new Set(u)).has(t)?r.delete(t):r.add(t),y(r))},className:"flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-400",children:(0,a.jsx)("span",{className:"material-symbols-outlined",children:s?"remove":"add"})}):(0,a.jsx)("div",{className:"w-8 h-8"}),(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-500",children:(0,a.jsx)("span",{className:"material-symbols-outlined",children:e.type.toLowerCase().includes("factory")?"factory":e.type.toLowerCase().includes("cell")?"grid_view":"precision_manufacturing"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-bold text-gray-900 dark:text-white",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.type," • ",e.model||"No Model"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:`px-2.5 py-1 rounded-md text-xs font-bold ${N(e.status)}`,children:e.status}),(0,a.jsxs)("button",{onClick:a=>j(e.id,a),className:"hidden group-hover:flex items-center gap-1 px-3 py-1.5 rounded-lg text-primary bg-primary/10 hover:bg-primary/20 text-xs font-bold transition-colors",children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Add Child"]})]})]}),s&&e.children.map(e=>(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(k,{node:e,level:t+1})},e.id))]})};return(0,a.jsx)("main",{className:"flex-1 px-4 sm:px-6 md:px-10 py-8 bg-background-light dark:bg-background-dark min-h-screen",children:(0,a.jsxs)("div",{className:"mx-auto max-w-7xl space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-black text-gray-900 dark:text-white tracking-[-0.033em]",children:"My Equipment"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center p-1 rounded-lg bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("button",{onClick:()=>x("grid"),className:`px-3 py-1.5 rounded-md flex items-center gap-2 text-sm font-bold transition-colors ${"grid"===o?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700"}`,children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-lg",children:"grid_view"}),"Grid"]}),(0,a.jsxs)("button",{onClick:()=>x("hierarchy"),className:`px-3 py-1.5 rounded-md flex items-center gap-2 text-sm font-bold transition-colors ${"hierarchy"===o?"bg-white dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white":"text-gray-500 hover:text-gray-700"}`,children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-lg",children:"account_tree"}),"Hierarchy"]})]}),(0,a.jsxs)(r.default,{href:"/dashboard/equipment/new",className:"flex h-10 items-center justify-center gap-x-2 rounded-lg bg-primary px-4 text-sm font-bold text-white hover:bg-primary/90 transition-colors shadow-sm",children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-lg",children:"add"}),(0,a.jsx)("span",{children:"Add New Equipment"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 bg-white dark:bg-gray-800 p-2 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-gray-400",children:"search"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name or ID...",value:g,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-transparent text-sm text-gray-900 dark:text-white placeholder:text-gray-400 focus:outline-none"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 sm:pb-0",children:["all","active","repair","decommissioned"].map(e=>(0,a.jsx)("button",{onClick:()=>h(e),className:`
                                    px-4 py-1.5 rounded-lg text-sm font-bold whitespace-nowrap transition-colors
                                    ${m===e||"active"===e&&"active"===m?"bg-primary/10 text-primary":"text-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700"}
                                `,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),"hierarchy"===o&&(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm font-medium text-primary",children:[(0,a.jsxs)("button",{onClick:()=>y(new Set),className:"flex items-center gap-1 hover:underline",children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-base",children:"unfold_less"}),"Collapse All"]}),(0,a.jsxs)("button",{onClick:()=>{y(new Set(i.map(e=>e.id)))},className:"flex items-center gap-1 hover:underline",children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-base",children:"unfold_more"}),"Expand All"]})]}),n?(0,a.jsx)("div",{className:"flex justify-center py-20",children:(0,a.jsx)("span",{className:"material-symbols-outlined animate-spin text-primary text-4xl",children:"progress_activity"})}):0===i.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-5xl mb-4",children:"inventory_2"}),(0,a.jsx)("p",{children:"No equipment found."})]}):(0,a.jsx)("div",{className:"space-y-4",children:"hierarchy"===o?(0,a.jsx)("div",{className:"space-y-2",children:w.length>0?w.map(e=>(0,a.jsx)(k,{node:e},e.id)):(0,a.jsx)("p",{className:"text-gray-500",children:"No matching items configured in hierarchy."})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>b.push(`/dashboard/equipment/${e.id}`),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700",children:(0,a.jsx)("span",{className:"material-symbols-outlined text-gray-500",children:"precision_manufacturing"})}),(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${N(e.status)}`,children:e.status})]}),(0,a.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white mb-1",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.type," • ",e.serialNumber]})]},e.id))})})]})})}e.s(["default",()=>l])}]);